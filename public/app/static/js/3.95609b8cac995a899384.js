webpackJsonp([3],{"5QBp":function(e,t){},S2NW:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("34+y");var n=s("X+yh"),a=s.n(n),o=(s("lrMw"),s("7YS2")),i=s.n(o),r=(s("y+mr"),s("3JdW")),c=s.n(r),l=(s("f1Vh"),s("ZQVe")),u=s.n(l),d=s("7+uW"),p=s("bYAN"),h=s("mtWM"),m=s.n(h);d.default.use(u.a,c.a,i.a);var f={name:"register",components:{Backheader:p.a},data:function(){return{username:"",phone:"",password:"",code:"",adminCode:"111",sendMsg:"发送验证码",isSend:!1}},methods:{login:function(){this.$router.push("/login")},sendCode:function(){var e=this;if("success"===this.phoneState){var t=60,s=setInterval(function(){e.sendMsg=t+"s后可重新发送",e.isSend=!0,(t-=1)<0&&(clearInterval(s),e.sendMsg="发送验证码",e.isSend=!1)},1e3);m.a.get("https://www.daxunxun.com/users/sendCode?tel="+this.phone).then(function(t){console.log(t),1===t.data?a()({message:"该用户已注册",iconClass:"iconfont icon-Warning"}):0===t.data?a()({message:"手机号验证码获取失败",iconClass:"iconfont icon-error"}):e.adminCode=t.data.code}).catch(function(e){return console.log(e)})}else a()({message:"请先输入正确的手机号码",position:"middle",duration:3e3})},sendRegister:function(){var e=this;m.a.post("https://www.daxunxun.com/users/register",{username:this.phone,password:this.password}).then(function(t){2===t.data?a()({message:"该用户已注册",iconClass:"iconfont icon-Warning"}):0===t.data?a()({message:"注 册 失 败",iconClass:"iconfont icon-error"}):(a()({message:"注 册 成 功！",iconClass:"iconfont icon-popsuccess"}),e.$store.commit("changeLoginState",!0),e.$router.push("/"))}).catch(function(e){return console.log(e)})}},computed:{usernameState:function(){return""==this.username?"":/^[^ ]+$/.test(this.username)?"success":"error"},phoneState:function(){return""===this.phone?"":/^1[3|4|5|6|7|8|9][0-9]\d{8}$/.test(this.phone)?"success":"error"},codeState:function(){return""===this.code?"":this.code===this.adminCode?"success":"error"},passwordState:function(){return""===this.password?"":this.password.length>=6?"success":"error"},type:function(){return"success"===this.usernameState&&"success"===this.phoneState&&"success"===this.passwordState?"primary":"default"},isAllOk:function(){return"success"!==this.usernameState||"success"!==this.phoneState||"success"!==this.passwordState}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("Backheader"),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"registerbox"},[n("div",{staticClass:"box"},[n("mt-cell",{staticClass:"loginTitle",attrs:{title:"用户注册"}},[n("span",{staticClass:"note"},[e._v("欢迎注册商城会员")]),e._v(" "),n("img",{attrs:{slot:"icon",src:s("W6iL"),width:"24",height:"24"},slot:"icon"})]),e._v(" "),n("mt-field",{attrs:{placeholder:"请输入用户名",state:e.usernameState},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),n("mt-field",{attrs:{placeholder:"请输入手机号",type:"tel",state:e.phoneState},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),n("mt-field",{attrs:{placeholder:"请输入验证码",type:"tel",state:e.codeState},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[n("mt-button",{attrs:{plain:"",disabled:e.isSend},nativeOn:{click:function(t){return e.sendCode(t)}}},[e._v(e._s(e.sendMsg))])],1),e._v(" "),n("mt-field",{attrs:{placeholder:"请输入密码",type:"password",state:e.passwordState},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),n("mt-button",{attrs:{type:e.type,size:"large",disabled:e.isAllOk},nativeOn:{click:function(t){return e.sendRegister(t)}}},[e._v("会员注册")]),e._v(" "),n("mt-cell",{staticClass:"loginTitle loginTab",attrs:{title:"若已经注册，请直接登录"}},[n("span",{staticClass:"note"},[e._v("欢迎登录")]),e._v(" "),n("img",{attrs:{slot:"icon",src:s("R+PB"),width:"24",height:"24"},slot:"icon"})]),e._v(" "),n("mt-button",{attrs:{type:"primary",size:"large"},nativeOn:{click:function(t){return e.login(t)}}},[e._v("会员登录")])],1)])])],1)},staticRenderFns:[]};var v=s("VU/8")(f,g,!1,function(e){s("5QBp")},null,null);t.default=v.exports},W6iL:function(e,t,s){e.exports=s.p+"static/img/register.924043a.png"}});
//# sourceMappingURL=3.95609b8cac995a899384.js.map